<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thirumala Drip Irrigation</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f4f4f9;
            color: #333;
        }
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 30px;
            font-size: 2.5em;
        }
        .customer-details {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
        }
        .customer-details div {
            flex: 1;
            text-align: center;
        }
        .customer-details input {
            padding: 8px;
            width: 60%;
            border: 2px solid #2c3e50;
            border-radius: 5px;
            font-size: 16px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
            background-color: #fff;
        }
        table, th, td {
            border: 1px solid #2c3e50;
        }
        th, td {
            padding: 12px;
            text-align: center;
        }
        th {
            background-color: #2980b9;
            color: #fff;
        }
        #total-summary {
            text-align: right;
            margin-bottom: 20px;
            font-weight: bold;
        }
        #actions {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
        }
        .signature {
            margin-top: 40px;
            text-align: left;
        }
        button {
            background-color: #2980b9;
            color: #fff;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover {
            background-color: #21618c;
        }
        @media print {
            #add-row, #remove-row, #print-button, #whatsapp-share {
                display: none;
            }
        }
    </style>
</head>
<body>

    <h1>Thirumala Drip Irrigation</h1>

    <div class="customer-details">
        <div>
            Name: <input type="text" id="customer-name" placeholder="Enter Name">
        </div>
        <div>
            Phone: <input type="tel" id="customer-phone" placeholder="Enter Phone Number">
        </div>
        <div>
            Date: <span id="current-date"></span>
        </div>
    </div>

    <table id="items-table">
        <thead>
            <tr>
                <th>Items</th>
                <th>Quantity</th>
                <th>Price</th>
                <th>Total Price</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>
                    <input list="item-names" class="item-name" placeholder="Start typing item name">
                    <datalist id="item-names">
                        <option value="Drip Pipes">
                        <option value="Sprinklers">
                        <option value="Fittings">
                        <option value="Valves">
                        <option value="Filters">
                    </datalist>
                </td>
                <td><input type="number" min="1" value="1" class="quantity"></td>
                <td><input type="number" min="0.01" step="0.01" value="0" class="price"></td>
                <td class="total-price">0</td>
            </tr>
        </tbody>
    </table>

    <div id="total-summary">
        Total Items: <span id="total-items">1</span> | 
        Total Quantity: <span id="total-quantity">1</span> | 
        Total Cost: ₹<span id="total-cost">0</span>
    </div>

    <div id="actions">
        <button id="add-row">Add Row</button>
        <button id="remove-row">Remove Row</button>
    </div>

    <div class="signature">
        Signature: ________________________
    </div>

    <div id="actions">
        <button id="print-button">Print</button>
        <button id="whatsapp-share">Share on WhatsApp</button>
    </div>

    <script>
        // Set current date
        document.getElementById('current-date').textContent = new Date().toLocaleDateString();

        const tableBody = document.querySelector("#items-table tbody");

        // Add Row functionality
        document.getElementById("add-row").addEventListener("click", () => {
            const newRow = document.createElement("tr");
            newRow.innerHTML = `
                <td>
                    <input list="item-names" class="item-name" placeholder="Start typing item name">
                </td>
                <td><input type="number" min="1" value="1" class="quantity"></td>
                <td><input type="number" min="0.01" step="0.01" value="0" class="price"></td>
                <td class="total-price">0</td>
            `;
            tableBody.appendChild(newRow);
            updateTotals();
        });

        // Remove Row functionality
        document.getElementById("remove-row").addEventListener("click", () => {
            if (tableBody.rows.length > 1) {
                tableBody.deleteRow(tableBody.rows.length - 1);
                updateTotals();
            }
        });

        // Update total quantity, items, and cost
        function updateTotals() {
            let totalItems = tableBody.rows.length;
            let totalQuantity = 0;
            let totalCost = 0;

            Array.from(tableBody.rows).forEach(row => {
                const quantity = parseFloat(row.querySelector(".quantity").value);
                const price = parseFloat(row.querySelector(".price").value);
                const totalPrice = quantity * price;
                row.querySelector(".total-price").textContent = totalPrice.toFixed(2);

                totalQuantity += quantity;
                totalCost += totalPrice;
            });

            document.getElementById("total-items").textContent = totalItems;
            document.getElementById("total-quantity").textContent = totalQuantity;
            document.getElementById("total-cost").textContent = totalCost.toFixed(2);
        }

        // Event listener for input changes to update totals
        tableBody.addEventListener("input", updateTotals);

        // Print functionality
        document.getElementById("print-button").addEventListener("click", () => {
            window.print();
        });

        // Share on WhatsApp functionality
    // Function to generate WhatsApp message
    function generateWhatsAppMessage() {
        const shopName = "Thirumala Drip Irrigation";
        const customerName = document.getElementById("customer-name").value;
        const customerPhone = document.getElementById("customer-phone").value;
        const currentDate = new Date().toLocaleDateString();

        // Collect table data
        let itemDetails = "";
        const rows = document.querySelectorAll("#items-table tbody tr");
        rows.forEach((row, index) => {
            const itemName = row.querySelector('.item-name').value;
            const quantity = row.querySelector('.quantity').value;
            const price = row.querySelector('.price').value;
            const totalPrice = row.querySelector('.total-price').textContent;

            itemDetails += `${index + 1}. Item: ${itemName}, Quantity: ${quantity}, Price: ₹${price}, Total: ₹${totalPrice}\n`;
        });

        const totalItems = document.getElementById("total-items").textContent;
        const totalQuantity = document.getElementById("total-quantity").textContent;
        const totalCost = document.getElementById("total-cost").textContent;

        // Construct the message
        let message = `*${shopName}*\n`;
        message += `Customer Name: ${customerName}\n`;
        message += `Phone Number: ${customerPhone}\n`;
        message += `Date: ${currentDate}\n\n`;
        message += `*Item Details:*\n${itemDetails}\n`;
        message += `Total Items: ${totalItems}\n`;
        message += `Total Quantity: ${totalQuantity}\n`;
        message += `Total Cost: ₹${totalCost}\n`;

        return encodeURIComponent(message);
    }

    // WhatsApp share button functionality
    document.getElementById("whatsapp-share").addEventListener("click", () => {
        const phoneNumber = document.getElementById("customer-phone").value;
        if (!phoneNumber) {
            alert("Please enter a phone number");
            return;
        }

        const message = generateWhatsAppMessage();
        const url = `https://wa.me/${phoneNumber}?text=${message}`;
        window.open(url, "_blank");
    });
    </script>

</body>
</html>
